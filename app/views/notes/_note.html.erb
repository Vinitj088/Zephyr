<div class="note-card" data-controller="note-modal">
  <div class="note-preview" data-action="click->note-modal#open">
    <h3><%= note.title %></h3>
    <div class="note-content">
      <%= render_markdown(truncate(note.content, length: 150, separator: ' ')) %>
    </div>
  </div>

  <div class="note-modal hidden" data-note-modal-target="modal">
    <div class="modal-backdrop" data-action="click->note-modal#close"></div>
    <div class="modal-container">
      <div class="modal-content">
        <div class="modal-header">
          <h2><%= note.title %></h2>
          <button type="button" class="close-button" data-action="note-modal#close">Ã—</button>
        </div>
        <div class="modal-body">
          <div class="note-content">
            <%= render_markdown(note.content) %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="note-actions">
    <%= link_to edit_note_path(note),
                class: "button",
                data: { 
                  turbo_frame: "slide-panel",
                  action: "slide-panel#open"
                } do %>
      Edit
    <% end %>
    <%= button_to note_path(note), 
                  method: :delete,
                  class: "button secondary",
                  data: { turbo_confirm: "Are you sure you want to delete this note?" } do %>
      Delete
    <% end %>
  </div>
</div> 